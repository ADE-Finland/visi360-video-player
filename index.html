<!DOCTYPE html>
<html>
<head>
	<title>VISI360 player</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, viewport-fit=cover" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="mobile-web-app-capable" content="yes" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta http-equiv="x-ua-compatible" content="IE=edge" />
	<style>
		html { height:100%; }
		body { height:100%; overflow:hidden; margin:0; padding:0; font-family:Arial; font-size:16px; color:#FFFFFF; background-color:#000000; }
	</style>
</head>
<body>

<link rel="stylesheet" href="css/popup.css?t=16012023">
<script src="tour.js"></script>

<script>document.write("<script type='text/javascript' src='tourBuilding.js?v=" + Date.now() + "'><\/script>");</script>

<div id="upload">
	<div id="buttonArea">
		<br>
		<label for="jsonInput">
			<div class="jsonInputImgBox"></div>
			<p class="main-menu-button-text">Load JSON</p>
		</label>
		<label for="startDemo" id="startDemoLabel">
			<div class="jsonInputImgBox"></div>
			<p class="main-menu-button-text">Load Demo</p>
		</label>
		<label for="start" id="startLabel" style="visibility:hidden;">
			<div class="startImgBox"></div>
			<p class="main-menu-button-text">Play</p>
		</label>
		<label for="startDebug" id="startDebugLabel" style="visibility:hidden;">
			<div class="startImgBox"></div>
			<p class="main-menu-button-text">Play (Debug)</p>
		</label>
		<input id="jsonInput" type="file" accept=".json" value="Import" class="main-menu-button"/><br />
		<button id="import" onclick="importFiles();" class="main-menu-button">Import</button><br />
		<button id="start" onclick="startSimulation();" class="main-menu-button" style="visibility:hidden;">Start Simulation</button>
		<button id="startDebug" onclick="startSimulation(); enableDebugTools();" class="main-menu-button" style="visibility:hidden;">Start Simulation (Debug)</button>
		<button id="startDemo" onclick="getDemoData();" style="visibility:hidden;" class="main-menu-button">Start Demo</button>
	</div>
	<div id="textArea">
		<p id="loadText" class="text-area-text">Please load a JSON file to start, or press 'Load Demo' to load the necessary files for the premade demo tour.</p><br/>
		<p id="materialCheckStatus" class="text-area-text" style="visibility:hidden;">Checking videos</p>
		<p id="materialCheckStatus2" class="text-area-text" style="visibility:hidden;">Materials found: 0/0</p><br />
		<p id="errorStatus" class="text-area-text" style="visibility:hidden;">Missing files:</p><br />
	</div>

	<script type="text/javascript">
		let file = document.querySelector('#jsonInput');
		let test2 = document.querySelector('#loadText');

		file.addEventListener('change', function(e){
		test2.innerHTML = e.target.files[0].name;
		importFiles();
		});
	</script>
</div>

<div id="pano" style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:0;">
	<noscript><table style="width:100%;height:100%;"><tr style="vertical-align:middle;"><td><div style="text-align:center;">ERROR:<br/><br/>Javascript not activated<br/><br/></div></td></tr></table></noscript>
	<script>
		embedpano({swf:"tour.swf", xml:"tour.xml?nh=%$random%", target:"pano", html5:"auto", mobilescale:1.0, passQueryParameters:true});
	</script>
</div>

</body>
</html>
